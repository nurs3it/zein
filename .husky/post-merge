#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# –ü—Ä–æ–≤–µ—Ä—è–µ–º, –∏–∑–º–µ–Ω–∏–ª—Å—è –ª–∏ package-lock.json
changed_files="$(git diff-tree -r --name-only --no-commit-id ORIG_HEAD HEAD)"

check_run() {
  echo "$changed_files" | grep --quiet "$1" && eval "$2"
}

# –ï—Å–ª–∏ –∏–∑–º–µ–Ω–∏–ª—Å—è package-lock.json, —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
check_run "package-lock.json" "echo 'üì¶ package-lock.json changed, running npm install...' && npm install"

echo "‚úÖ Post-merge checks completed!" 